{"version":3,"sources":["country.js"],"names":["arrayLike","length","chooseCountry","countries","showBtn","$","popBox","mask","closeBtn","ul","ulHeight","ulContainer","ulContainerHeight","canBeScrolled","startPosY","transformY","createList","addMaskTransition","onclick","show","hide","addEventListener","e","changedTouches","screenY","style","transitionDuration","offsetHeight","document","body","d","translateY","t","transform","preventDefault","display","opacity","moveEventFunc","bind","removeEventListener","obj","distance","CSS","supports","s","querySelector","template","element","index","slice","call","htmlStr","forEach","innerHTML","getComputedStyle","getPropertyValue","init"],"mappings":"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","sourcesContent":["/**\r\n * choose country\r\n */\r\n\r\nconst arrayLike = {\r\n    0: \"English (United States)\",\r\n    1: \"English (United Kingdom)\",\r\n    2: \"繁體中文 (香港)\",\r\n    3: \"한국어\",\r\n    4: \"日本語\",\r\n    5: \"English (Singapore)\",\r\n    6: \"Français\",\r\n    7: \"Deutsch\",\r\n    8: \"Español\",\r\n    9: \"Italiano\",\r\n    10: \"Русский\",\r\n    11: \"English (Malaysia)\",\r\n    12: \"ภาษาไทย\",\r\n    13: \"Bahasa Indonesia\",\r\n    length: 14\r\n}\r\n\r\nclass chooseCountry {\r\n    constructor(countries) {\r\n        this.countries = countries\r\n        this.showBtn = this.$(\"#footer .pop-country\")\r\n        this.popBox = this.$(\"#choose-country\")\r\n        this.mask = this.$(\"#mask\")\r\n        this.closeBtn = this.$(\"#choose-country .close-btn\")\r\n        this.ul = this.$(\"#choose-country .country-ul\")\r\n        this.ulHeight= null\r\n        this.ulContainer = this.$(\"#choose-country .country-container\")\r\n        this.ulContainerHeight = null\r\n        this.canBeScrolled= false\r\n        this.startPosY = null\r\n        this.transformY = 0\r\n    }\r\n    init() {\r\n\r\n        this.createList()\r\n        this.addMaskTransition()\r\n        this.showBtn.onclick = () => {\r\n            this.show()\r\n        }\r\n        this.closeBtn.onclick=()=>{\r\n            this.hide()\r\n        }\r\n        this.mask.onclick =()=>{\r\n            this.hide()\r\n        }\r\n        this.ulContainer.addEventListener(\"touchstart\",e=>{\r\n            this.startPosY = e.changedTouches[0].screenY\r\n            this.ul.style.transitionDuration = \"0s\"\r\n            this.ulHeight = this.ul.offsetHeight\r\n            this.ulContainerHeight = this.ulContainer.offsetHeight\r\n            this.canBeScrolled = true\r\n        })\r\n        document.body.addEventListener(\"touchend\",e=>{\r\n            if(this.canBeScrolled){\r\n                let d = e.changedTouches[0].screenY - this.startPosY\r\n                if(d + this.transformY >= 0){\r\n                    this.ul.style.transitionDuration = \"0.2s\"\r\n                    this.ul.offsetHeight\r\n                    this.translateY(this.ul,0)\r\n                    this.transformY = 0\r\n                } else if (-1 * (d + this.transformY) >= this.ulHeight-this.ulContainerHeight) {\r\n                    this.ul.style.transitionDuration = \"0.2s\"\r\n                    this.ul.offsetHeight\r\n                    let t = this.ulContainerHeight -this.ulHeight\r\n                    this.translateY(this.ul,t+\"px\")\r\n                    this.transform = t\r\n                }else{\r\n                    this.translateY(this.ul,d + this.transformY + \"px\")\r\n                    this.transformY += d\r\n                }\r\n                this.canBeScrolled = false\r\n            }\r\n        })\r\n\r\n        this.popBox.addEventListener(\"wheel\",e=>{e.preventDefault()})\r\n        this.mask.addEventListener(\"wheel\",e=>{e.preventDefault()})\r\n    }\r\n    moveEventFunc(e){\r\n            if(this.canBeScrolled){\r\n                let d  = e.changedTouches[0].screenY - this.startPosY\r\n                if (d + this.transformY >= 0){\r\n                    this.translateY(this.ul, (d + this.transformY) / 3 + \"px\")\r\n                }else if(-1 * (d + this.transformY) >= this.ulHeight-this.ulContainerHeight){\r\n                    let t  = this.ulContainerHeight - this.ulHeight\r\n                    this.translateY(this.ul, t + (d + this.transformY - t) /3  + \"px\")\r\n                }else{\r\n                this.translateY(this.ul,d + this.transformY +\"px\")\r\n                }\r\n            }\r\n    }\r\n    show() {\r\n        this.translateY(this.popBox,0)\r\n        this.mask.style.display = \"block\"\r\n        this.mask.style.opacity = \"0.5\"\r\n        document.body.addEventListener(\"touchmove\",this.moveEventFunc.bind(this))\r\n    }\r\n    hide() {\r\n        this.translateY(this.popBox,\"100%\")\r\n        this.mask.style.opacity = \"0\"\r\n        document.body.removeEventListener(\"touchmove\",this.moveEventFunc.bind(this))\r\n    }\r\n    translateY(obj,distance){\r\n            if (CSS && CSS.supports(\"transform-style\", \"preserve-3d\")) {\r\n                obj.style.transform = `translate3d(0,${distance},0)`\r\n            } else {\r\n                obj.style.transform = `translateY(${distance})`\r\n            }\r\n    }\r\n    $(s) {\r\n        return document.querySelector(s)\r\n    }\r\n    createList() {\r\n        let template = (element, index) =>\r\n            `<li class=\"country-li\">\r\n                <i class=\"country-icon country-icon-${index}\"></i>\r\n                <span class=\"country-name\">${element}</span>\r\n            </li>`\r\n        const countries = [].slice.call(this.countries)\r\n        let htmlStr = \"\"\r\n        countries.forEach((element, index) => {\r\n            htmlStr += template(element, index)\r\n        });\r\n        let ul = document.querySelector(\"#choose-country .country-ul\")\r\n        ul.innerHTML = htmlStr\r\n    }\r\n    addMaskTransition(){\r\n        this.mask.addEventListener(\"transitionend\",()=>{\r\n            let opacity = getComputedStyle(this.mask).getPropertyValue(\"opacity\")\r\n            if(opacity == 0){\r\n                this.mask.style.display = \"none\"\r\n            }\r\n        })\r\n    }\r\n}\r\n(new chooseCountry(arrayLike)).init()"],"file":"country.js"}