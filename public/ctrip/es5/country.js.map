{"version":3,"sources":["country.js"],"names":["arrayLike","length","chooseCountry","countries","showBtn","$","popBox","mask","closeBtn","ul","ulHeight","ulContainer","ulContainerHeight","canBeScrolled","startPosY","transformY","createList","addMaskTransition","onclick","show","hide","addEventListener","e","changedTouches","screenY","offsetHeight","document","body","d","translateY","t","transform","console","log","style","display","opacity","moveEventFunc","bind","removeEventListener","obj","distance","CSS","supports","s","querySelector","template","element","index","slice","call","htmlStr","forEach","innerHTML","getComputedStyle","getPropertyValue","init"],"mappings":"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","sourcesContent":["/**\n * choose country\n */\n\nconst arrayLike = {\n    0: \"English (United States)\",\n    1: \"English (United Kingdom)\",\n    2: \"繁體中文 (香港)\",\n    3: \"한국어\",\n    4: \"日本語\",\n    5: \"English (Singapore)\",\n    6: \"Français\",\n    7: \"Deutsch\",\n    8: \"Español\",\n    9: \"Italiano\",\n    10: \"Русский\",\n    11: \"English (Malaysia)\",\n    12: \"ภาษาไทย\",\n    13: \"Bahasa Indonesia\",\n    length: 14\n}\n\nclass chooseCountry {\n    constructor(countries) {\n        this.countries = countries\n        this.showBtn = this.$(\"#footer .pop-country\")\n        this.popBox = this.$(\"#choose-country\")\n        this.mask = this.$(\"#mask\")\n        this.closeBtn = this.$(\"#choose-country .close-btn\")\n        this.ul = this.$(\"#choose-country .country-ul\")\n        this.ulHeight= null\n        this.ulContainer = this.$(\"#choose-country .country-container\")\n        this.ulContainerHeight = null\n        this.canBeScrolled= false\n        this.startPosY = null\n        this.transformY = 0\n    }\n    init() {\n        this.createList()\n        this.addMaskTransition()\n        this.showBtn.onclick = () => {\n            this.show()\n        }\n        this.closeBtn.onclick=()=>{\n            this.hide()\n        }\n        this.mask.onclick =()=>{\n            this.hide()\n        }\n        this.ulContainer.addEventListener(\"touchstart\",e=>{\n            this.startPosY = e.changedTouches[0].screenY\n            this.ulHeight = this.ul.offsetHeight\n            this.ulContainerHeight = this.ulContainer.offsetHeight\n            this.canBeScrolled = true\n        })\n        document.body.addEventListener(\"touchend\",e=>{\n            if(this.canBeScrolled){\n                let d = e.changedTouches[0].screenY - this.startPosY\n                if(d + this.transformY >= 0){\n                    this.translateY(this.ul,0)\n                    this.transformY = 0\n                } else if (-1 * (d + this.transformY) >= this.ulHeight) {\n                    let t = this.ulContainerHeight -this.ulHeight\n                    this.translateY(this.ul,t+\"px\")\n                    this.transform = t\n                }else{\n                    this.translateY(this.ul,d + this.transformY + \"px\")\n                    this.transformY += d\n                }\n                this.canBeScrolled = false\n            }\n        })\n    }\n    moveEventFunc(e){\n        console.log('scroll',this.canBeScrolled);\n        \n            if(this.canBeScrolled){\n            console.log('body move');\n                let d  = e.changedTouches[0].screenY - this.startPosY\n                this.translateY(this.ul,d + this.transformY +\"px\")\n            }\n    }\n    show() {\n        this.translateY(this.popBox,0)\n        this.mask.style.display = \"block\"\n        this.mask.style.opacity = \"0.5\"\n        document.body.addEventListener(\"touchmove\",this.moveEventFunc.bind(this))\n    }\n    hide() {\n        this.translateY(this.popBox,\"100%\")\n        this.mask.style.opacity = \"0\"\n        document.body.removeEventListener(\"touchmove\",this.moveEventFunc.bind(this))\n    }\n    translateY(obj,distance){\n            if (CSS && CSS.supports(\"transform-style\", \"preserve-3d\")) {\n                obj.style.transform = `translate3d(0,${distance},0)`\n            } else {\n                obj.style.transform = `translateY(${distance})`\n            }\n    }\n    $(s) {\n        return document.querySelector(s)\n    }\n    createList() {\n        let template = (element, index) =>\n            `<li class=\"country-li\">\n                <i class=\"country-icon country-icon-${index}\"></i>\n                <span class=\"country-name\">${element}</span>\n            </li>`\n        const countries = [].slice.call(this.countries)\n        let htmlStr = \"\"\n        countries.forEach((element, index) => {\n            htmlStr += template(element, index)\n        });\n        let ul = document.querySelector(\"#choose-country .country-ul\")\n        ul.innerHTML = htmlStr\n    }\n    addMaskTransition(){\n        this.mask.addEventListener(\"transitionend\",()=>{\n            let opacity = getComputedStyle(this.mask).getPropertyValue(\"opacity\")\n            if(opacity == 0){\n                this.mask.style.display = \"none\"\n            }\n        })\n    }\n}\n(new chooseCountry(arrayLike)).init()"],"file":"country.js"}