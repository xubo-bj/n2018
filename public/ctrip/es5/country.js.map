{"version":3,"sources":["country.js"],"names":["arrayLike","length","chooseCountry","countries","showBtn","$","popBox","mask","closeBtn","ul","ulHeight","ulContainer","ulContainerHeight","canBeScrolled","startPosY","transformY","beginTime","createList","addMaskTransition","onclick","show","hide","addEventListener","e","Date","now","changedTouches","screenY","style","transitionDuration","offsetHeight","document","body","d","translateY","t","transform","touchDuration","console","log","velocity","preventDefault","display","opacity","moveEventFunc","bind","removeEventListener","obj","distance","CSS","supports","s","querySelector","template","element","index","parseInt","slice","call","htmlStr","forEach","innerHTML","getComputedStyle","getPropertyValue","init"],"mappings":"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","sourcesContent":["/**\n * choose country\n */\n\nconst arrayLike = {\n    0: \"English (United States)\",\n    1: \"English (United Kingdom)\",\n    2: \"繁體中文 (香港)\",\n    3: \"한국어\",\n    4: \"日本語\",\n    5: \"English (Singapore)\",\n    6: \"Français\",\n    7: \"Deutsch\",\n    8: \"Español\",\n    9: \"Italiano\",\n    10: \"Русский\",\n    11: \"English (Malaysia)\",\n    12: \"ภาษาไทย\",\n    13: \"Bahasa Indonesia\",\n    14:\"Tiếng Viê\",\n    15:\"Nederlands\",\n    16:\"Polski\",\n    17:\"Ελληνικά\",\n    18:\"Türkçe\",\n    19:\"Português (Brasil)\",\n    length: 20\n}\n\nclass chooseCountry {\n    constructor(countries) {\n        this.countries = countries\n        this.showBtn = this.$(\"#footer .pop-country\")\n        this.popBox = this.$(\"#choose-country\")\n        this.mask = this.$(\"#mask\")\n        this.closeBtn = this.$(\"#choose-country .close-btn\")\n        this.ul = this.$(\"#choose-country .country-ul\")\n        this.ulHeight= null\n        this.ulContainer = this.$(\"#choose-country .country-container\")\n        this.ulContainerHeight = null\n        this.canBeScrolled= false\n        this.startPosY = null\n        this.transformY = 0\n        this.beginTime = null\n    }\n    init() {\n\n        this.createList()\n        this.addMaskTransition()\n        this.showBtn.onclick = () => {\n            this.show()\n        }\n        this.closeBtn.onclick=()=>{\n            this.hide()\n        }\n        this.mask.onclick =()=>{\n            this.hide()\n        }\n        this.ulContainer.addEventListener(\"touchstart\",e=>{\n            this.beginTime = Date.now()\n            this.startPosY = e.changedTouches[0].screenY\n            this.ul.style.transitionDuration = \"0s\"\n            this.ulHeight = this.ul.offsetHeight\n            this.ulContainerHeight = this.ulContainer.offsetHeight\n            this.canBeScrolled = true\n        })\n        document.body.addEventListener(\"touchend\",e=>{\n            if(this.canBeScrolled){\n                let d = e.changedTouches[0].screenY - this.startPosY\n\n                if(d + this.transformY >= 0){\n                    this.ul.style.transitionDuration = \"0.2s\"\n                    this.ul.offsetHeight\n                    this.translateY(this.ul,0)\n                    this.transformY = 0\n                } else if (-1 * (d + this.transformY) >= this.ulHeight-this.ulContainerHeight) {\n                    this.ul.style.transitionDuration = \"0.2s\"\n                    this.ul.offsetHeight\n                    let t = this.ulContainerHeight -this.ulHeight\n                    this.translateY(this.ul,t+\"px\")\n                    this.transform = t\n                }else{\n\nlet touchDuration = Date.now() - this.beginTime\nconsole.log('tD',touchDuration);\nlet velocity = d/touchDuration\nconsole.log('v',velocity);\n\n                    this.translateY(this.ul,d + this.transformY + \"px\")\n                    this.transformY += d\n                }\n                this.canBeScrolled = false\n            }\n        })\n\n        this.popBox.addEventListener(\"wheel\",e=>{e.preventDefault()})\n        this.mask.addEventListener(\"wheel\",e=>{e.preventDefault()})\n    }\n    moveEventFunc(e){\n            if(this.canBeScrolled){\n                console.log('inner');\n                let d  = e.changedTouches[0].screenY - this.startPosY\n                if (d + this.transformY >= 0){\n                    this.translateY(this.ul, (d + this.transformY) / 3 + \"px\")\n                }else if(-1 * (d + this.transformY) >= this.ulHeight-this.ulContainerHeight){\n                    let t  = this.ulContainerHeight - this.ulHeight\n                    this.translateY(this.ul, t + (d + this.transformY - t) /3  + \"px\")\n                }else{\n                this.translateY(this.ul,d + this.transformY +\"px\")\n                }\n            }\n    }\n    show() {\n        this.translateY(this.popBox,0)\n        this.mask.style.display = \"block\"\n        this.mask.style.opacity = \"0.5\"\n        document.body.addEventListener(\"touchmove\",this.moveEventFunc.bind(this))\n    }\n    hide() {\n        this.translateY(this.popBox,\"100%\")\n        this.mask.style.opacity = \"0\"\n        document.body.removeEventListener(\"touchmove\",this.moveEventFunc.bind(this))\n    }\n    translateY(obj,distance){\n            if (CSS && CSS.supports(\"transform-style\", \"preserve-3d\")) {\n                obj.style.transform = `translate3d(0,${distance},0)`\n            } else {\n                obj.style.transform = `translateY(${distance})`\n            }\n    }\n    $(s) {\n        return document.querySelector(s)\n    }\n    createList() {\n        let template = (element, index) =>\n            `<li class=\"country-li\">\n                <i class=\"country-icon country-icon-${parseInt(index)+1}\"></i>\n                <span class=\"country-name\">${element}</span>\n            </li>`\n        const countries = [].slice.call(this.countries)\n        let htmlStr = \"\"\n        countries.forEach((element, index) => {\n            htmlStr += template(element, index)\n        });\n        let ul = document.querySelector(\"#choose-country .country-ul\")\n        ul.innerHTML = htmlStr\n    }\n    addMaskTransition(){\n        this.mask.addEventListener(\"transitionend\",()=>{\n            let opacity = getComputedStyle(this.mask).getPropertyValue(\"opacity\")\n            if(opacity == 0){\n                this.mask.style.display = \"none\"\n            }\n        })\n    }\n}\n(new chooseCountry(arrayLike)).init()"],"file":"country.js"}