{"version":3,"sources":["index.js"],"names":["Carousel","outer","document","querySelector","inner","current","next","timer","start","picWidth","canBeMoved","transitionEvent","style","transitionDuration","translate","offsetHeight","console","log","addTransition","cycle","addSlideControl","addEventListener","removeEventListener","e","pause","changedTouches","screenX","offsetWidth","removeTransition","distance","direction","CSS","supports","transform","setInterval","clearInterval","carouselInstance","init"],"mappings":"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","file":"all.js","sourcesContent":["class Carousel {\n    constructor() {\n        this.outer = document.querySelector(\"#carousel\")\n        this.inner = document.querySelector(\"#carousel .inner\")\n        this.current =1 \n        this.next = 2\n        this.timer = null\n        this.start = null\n        this.picWidth = null\n        this.canBeMoved =true \n        this.transitionEvent =()=>{\n            if (this.current>= 7) {\n                this.inner.style.transitionDuration = \"0s\"\n                this.translate(\"head\")\n                // force browser reflow\n                this.inner.offsetHeight\n                this.inner.style.transitionDuration = \"0.2s\"\n                this.next = 2\n                this.current = 1\n            }\n            if (this.current<= 0) {\n                this.inner.style.transitionDuration = \"0s\"\n                this.translate(\"tail\")\n                // force browser reflow\n                this.inner.offsetHeight\n                this.inner.style.transitionDuration = \"0.2s\"\n                this.next = 7\n                this.current = 6\n            }\n            this.canBeMoved = true\n            console.log('okok');\n            \n        }\n    }\n    init(){\n        this.addTransition()\n        this.cycle()\n        this.addSlideControl()\n    }\n    addTransition() {\n        this.inner.addEventListener(\"transitionend\",this.transitionEvent)\n    }\n    removeTransition(){\n        this.inner.removeEventListener(\"transitionend\",this.transitionEvent)\n    }\n    addSlideControl(){\n        this.inner.addEventListener(\"touchstart\",(e)=>{\n            this.pause()\n            this.start = e.changedTouches[0].screenX\n            this.picWidth = this.outer.offsetWidth\n            this.removeTransition()\n        })\n        this.inner.addEventListener(\"touchmove\",(e)=>{\n            if(this.canBeMoved){\n                let distance  =e.changedTouches[0].screenX - this.start\n                this.translate(distance)\n            }\n        })\n        this.inner.addEventListener(\"touchend\", (e) => {\n            let distance = e.changedTouches[0].screenX - this.start\n            if (distance > 150) {\n                this.current--\n                this.next = this.current + 1\n            } else if (distance < -150) {\n                this.current++\n                this.next = this.current + 1\n            } else {\n            }\n\n            this.addTransition()\n            this.translate(\"current\")\n            this.cycle()\n\n        })\n    }\n    translate(direction) {\n        let translate = (distance) => {\n            if (CSS && CSS.supports(\"transform-style\", \"preserve-3d\")) {\n                this.inner.style.transform = `translate3d(${distance},0,0)`\n            } else {\n                this.inner.style.transform = `translateX(${distance})`\n            }\n        }\n        if (direction == null) {\n                translate(`${-12.5 * this.next}%`)\n            this.canBeMoved = false\n        }\n        if(direction == \"current\"){\n            translate(`${-12.5*this.current}%`)\n        }\n        if(direction === \"head\"){\n            translate(\"-12.5%\")\n        this.canBeMoved = false\n        }\n        if(direction === \"tail\"){\n            translate(\"-75%\")\n        this.canBeMoved = false\n        }\n        if(typeof direction === \"number\"){\n            translate(`${-1 *this.current*this.picWidth+direction}px`)\n        this.canBeMoved = false\n        }\n    }\n    cycle() {\n            this.timer = setInterval(() => {\n                this.translate()\n                this.current = this.next\n                this.next++\n            }, 13000)\n    }\n    pause(){\n        clearInterval(this.timer)\n    }\n}\n\n\nlet carouselInstance = new Carousel()\ncarouselInstance.init()\n\n\n"]}