{"version":3,"sources":["index.js"],"names":["Carousel","outer","document","querySelector","inner","current","next","timer","start","picWidth","canBeMoved","transitionEvent","style","transitionDuration","translate","offsetHeight","addTransition","cycle","addSlideControl","addEventListener","removeEventListener","e","pause","changedTouches","screenX","offsetWidth","removeTransition","distance","direction","CSS","supports","transform","location","setInterval","clearInterval","init","Search","$","s","indexPage","searchPage","searchBtn","onclick","display"],"mappings":"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","file":"all.js","sourcesContent":["/**\r\n *  implement carousel\r\n */\r\nclass Carousel {\r\n    constructor() {\r\n        this.outer = document.querySelector(\"#carousel\")\r\n        this.inner = document.querySelector(\"#carousel .inner\")\r\n        this.current = 1\r\n        this.next = 2\r\n        this.timer = null\r\n        this.start = null\r\n        this.picWidth = null\r\n        this.canBeMoved = true\r\n        this.transitionEvent = () => {\r\n            if (this.current >= 7) {\r\n                this.inner.style.transitionDuration = \"0s\"\r\n                this.translate(\"head\")\r\n                // force browser reflow\r\n                this.inner.offsetHeight\r\n                this.inner.style.transitionDuration = \"0.2s\"\r\n                this.next = 2\r\n                this.current = 1\r\n            }\r\n            if (this.current <= 0) {\r\n                this.inner.style.transitionDuration = \"0s\"\r\n                this.translate(\"tail\")\r\n                // force browser reflow\r\n                this.inner.offsetHeight\r\n                this.inner.style.transitionDuration = \"0.2s\"\r\n                this.next = 7\r\n                this.current = 6\r\n            }\r\n            this.canBeMoved = true\r\n        }\r\n    }\r\n    init() {\r\n        this.addTransition()\r\n        this.cycle()\r\n        this.addSlideControl()\r\n    }\r\n    addTransition() {\r\n        this.inner.addEventListener(\"transitionend\", this.transitionEvent)\r\n    }\r\n    removeTransition() {\r\n        this.inner.removeEventListener(\"transitionend\", this.transitionEvent)\r\n    }\r\n    addSlideControl() {\r\n        this.inner.addEventListener(\"touchstart\", (e) => {\r\n            this.pause()\r\n            this.start = e.changedTouches[0].screenX\r\n            this.picWidth = this.outer.offsetWidth\r\n            this.removeTransition()\r\n        })\r\n        this.inner.addEventListener(\"touchmove\", (e) => {\r\n            if (this.canBeMoved) {\r\n                let distance = e.changedTouches[0].screenX - this.start\r\n                this.translate(distance)\r\n            }\r\n        })\r\n        this.inner.addEventListener(\"touchend\", (e) => {\r\n            let distance = e.changedTouches[0].screenX - this.start\r\n            if (distance > 100) {\r\n                this.current--\r\n                this.next = this.current + 1\r\n            } else if (distance < -100) {\r\n                this.current++\r\n                this.next = this.current + 1\r\n            } else {}\r\n\r\n            this.addTransition()\r\n            this.translate(\"current\")\r\n            this.cycle()\r\n\r\n        })\r\n    }\r\n    translate(direction) {\r\n        let translate = (distance) => {\r\n            if (CSS && CSS.supports(\"transform-style\", \"preserve-3d\")) {\r\n                this.inner.style.transform = `translate3d(${distance},0,0)`\r\n            } else {\r\n                this.inner.style.transform = `translateX(${distance})`\r\n            }\r\n        }\r\n        switch (direction) {\r\n            case \"next\":\r\n                {\r\n                    translate(`${-12.5 * this.next}%`)\r\n                    this.canBeMoved = false\r\n                    break\r\n                }\r\n            case \"current\":\r\n                {\r\n                    translate(`${-12.5*this.current}%`)\r\n                    break\r\n                }\r\n            case \"head\":\r\n                {\r\n                    translate(\"-12.5%\")\r\n                    this.canBeMoved = false\r\n                    break\r\n                }\r\n            case \"tail\":\r\n                {\r\n                    translate(\"-75%\")\r\n                    this.canBeMoved = false\r\n                    break\r\n                }\r\n            default:\r\n                {\r\n                    let location = -1 * this.current * this.picWidth + direction\r\n                    translate(`${location}px`)\r\n\r\n                }\r\n        }\r\n    }\r\n    cycle() {\r\n        this.timer = setInterval(() => {\r\n            this.translate('next')\r\n            this.current = this.next\r\n            this.next++\r\n        }, 3000)\r\n    }\r\n    pause() {\r\n        clearInterval(this.timer)\r\n    }\r\n}\r\n\r\n(new Carousel()).init()\r\n\r\n/*\r\n ** fetch inform\r\n */\r\n\r\nclass Search {\r\n    constructor() {\r\n        this.$ = (s) => document.querySelector(s)\r\n        this.indexPage = this.$(\"#index-page\")\r\n        this.searchPage = this.$(\"#search-page\")\r\n        this.searchBtn = this.$(\"#header .search\")\r\n    }\r\n    init() {\r\n        this.searchBtn.onclick = () => {\r\n            this.indexPage.style.display = \"none\"\r\n            this.searchPage.style.display = \"block\"\r\n        }\r\n    }\r\n}\r\n(new Search()).init()\r\n\r\n\r\n\r\n// https://m.ctrip.com/restapi/h5api/searchapp/search?source=mobileweb&action=autocomplete&contentType=json&keyword=a"]}